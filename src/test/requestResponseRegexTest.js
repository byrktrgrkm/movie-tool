const {hexToUTF8,baseURL} = require('../core/help');
const {requestResponseRegex,requestResponseArrayRegex, request} = require('../core/request');


(async function requestResponseRegexTest(){
    console.log('working');

    const regex = /sources = \[\{\s*"default": true,\s*"file": "([^\s]+)"/gm;

    const data = await requestResponseRegex(
        request("http://rapidvid.net/vod/v1x460391e4?vst=1"),
        regex
    );

    console.log(data);
    console.log(hexToUTF8(data))

    /**
     * 
     * \x68\x74\x74\x70\x3a\x2f\x2f\x73\x32\x34\x2e\x74\x72\x6f\x75\x62\x6c\x65\x66\x69\x65\x6c\x64\x2e\x78\x79\x7a\x2f\x6d\x6b\x2f\x47\x33\x4d\x79\x70\x7a\x45\x69\x70\x32\x48\x68\x5a\x77\x4e\x6c\x5a\x76\x35\x4b\x45\x48\x56\x67\x45\x52\x6a\x68\x5a\x47\x4e\x34\x5a\x55\x4e\x68\x49\x53\x57\x47\x49\x48\x56\x64\x30\x7a\x78\x71\x55\x57\x69\x71\x4a\x57\x66\x4d\x4a\x4d\x63\x4d\x4a\x6b\x78\x59\x61\x75\x35\x72\x76\x6b\x6d\x71\x32\x53\x6c\x72\x61\x45\x6c\x4c\x4b\x49\x76\x4d\x4b\x56\x68\x72\x55\x79\x36\x59\x54\x35\x75\x4d\x4b\x41\x30\x6e\x4a\x57\x79\x70\x7a\x71\x79\x70\x76\x35\x76\x71\x4b\x63\x36\x73\x30\x78\x69\x32\x34\x76\x72\x31
        http://s24.troublefield.xyz/mk/G3MypzEip2HhZwNlZv5KEHVgERjhZGN4ZUNhISWGIHVd0zxqUWiqJWfMJMcMJkxYau5rvkmq2SlraElLKIvMKVhrUy6YT5uMKA0nJWypzqypv5vqKc6s0xi24vr1
     * 
     */

});

(async function requestResponseRegexTest(){
    console.log('working');

    const regex = /sources = \[\{\s*"default": true,\s*"file": "([^\s]+)"/gm;

    const data = await requestResponseRegex(
        request("http://rapidvid.net/vod/v1x460391e4?vst=1"),
        regex
    );

    console.log(data);
    console.log(hexToUTF8(data))

    /**
     * 
     * \x68\x74\x74\x70\x3a\x2f\x2f\x73\x32\x34\x2e\x74\x72\x6f\x75\x62\x6c\x65\x66\x69\x65\x6c\x64\x2e\x78\x79\x7a\x2f\x6d\x6b\x2f\x47\x33\x4d\x79\x70\x7a\x45\x69\x70\x32\x48\x68\x5a\x77\x4e\x6c\x5a\x76\x35\x4b\x45\x48\x56\x67\x45\x52\x6a\x68\x5a\x47\x4e\x34\x5a\x55\x4e\x68\x49\x53\x57\x47\x49\x48\x56\x64\x30\x7a\x78\x71\x55\x57\x69\x71\x4a\x57\x66\x4d\x4a\x4d\x63\x4d\x4a\x6b\x78\x59\x61\x75\x35\x72\x76\x6b\x6d\x71\x32\x53\x6c\x72\x61\x45\x6c\x4c\x4b\x49\x76\x4d\x4b\x56\x68\x72\x55\x79\x36\x59\x54\x35\x75\x4d\x4b\x41\x30\x6e\x4a\x57\x79\x70\x7a\x71\x79\x70\x76\x35\x76\x71\x4b\x63\x36\x73\x30\x78\x69\x32\x34\x76\x72\x31
        http://s24.troublefield.xyz/mk/G3MypzEip2HhZwNlZv5KEHVgERjhZGN4ZUNhISWGIHVd0zxqUWiqJWfMJMcMJkxYau5rvkmq2SlraElLKIvMKVhrUy6YT5uMKA0nJWypzqypv5vqKc6s0xi24vr1
     * 
     */

});


(async function requestResponseRegexArrayTest(){
    console.log('working');

    const regex = /#EXT-X-I-FRAME-STREAM-.+RESOLUTION=([\dx]+).+URI="(.*)"/gm;

    const link = "http://s24.troublefield.xyz/mx/G3MypzEip2HhZwNlZv5KEHVgERjhZGN4ZUNhISWGIHVd0zxqUWiqJWfMJMcMJkxYau5rvkmq2SlraElLKIvMKVhrUy6YT5uMKA0nJWypzqypv5vqKc6s0xi24vr1";

    const data = await requestResponseArrayRegex(
        request(link),
        regex
    );

    console.log(data);

    console.log(baseURL(link))


})();